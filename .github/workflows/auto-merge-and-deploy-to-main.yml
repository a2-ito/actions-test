name: Auto Merge and Deploy to main - scheduled

on:
  schedule:
    - cron: "30 * * * *"
env:
  BRANCH_FROM: stg
  BRANCH_TO: main

jobs:

  call-pr-and-merge:
    uses: a2-ito/actions-test/.github/workflows/merge-workflow.yml@dev
    with:
      branch_from: ${{ env.BRANCH_FROM }}
      branch_to: ${{ env.BRANCH_TO }}
  call-deployment:
    needs: call-pr-and-merge
    uses: a2-ito/actions-test/.github/workflows/deploy-workflow.yml@dev
    with:
      branch: ${{ env.BRANCH_TO }}
